简述一个请求的生命周期
OSI参考模型	TCP/IP协议族	TCP/IP分层模型
应用层	应用层	HTTP、 TFTP、FTP、NFS、WAIS、SNTP（可能为 SNMP/SNTP）
表示层	应用层	Telnet、Klogin、SNMP、Gopher
会话层		SNTP（可能为 SNMP/SNTP）、DNS
传输层	传输层	TCP、UDP
网络层	网络层	IP、ICMP、ARP、RARP、AKP（可能为 EAP）、UUCP
数据链路层	数据链路层	FDDI、Ethernet、Arpanet、PDN、SLIP、PPP
物理层		IEEE 802.1A、IEEE 802.2到IEEE 802.11
在浏览器中输入 www.baidu.com 后执行的全部过程
TCP/IP分层模型
对应的网络协议

HTTP、TPTP（疑似 TFTP）、FTP、NFS、WAIS、SNTP（可能为 SNMP/SNTP）

Telnet、Klogin、SNMP、Gopher

SNTP（可能为 SNMP/SNTP）、DNS

传送的数据类型
使用的中间设备

报文

TCP：报文段

UDP：用户数据报

网关
端对端

路由器

网桥

转发器

客户端浏览器通过 DNS 解析到 www.baidu.com 的 IP 地址 220.181.27.48，通过这个 IP 地址找到客户端到服务器的路径。客户端浏览器发起一个 HTTP 会话到 220.181.27.48，然后通过 TCP 进行封装数据包，输入到网络层。

在客户端的传输层，把 HTTP 会话请求分成报文段，添加源和目的端口，如服务器使用 80 端口监听客户端请求，客户端由系统随机选择一个端口如 5000，与服务器进行交换，服务器把相应的请求返回给客户端 5000 端口。然后使用 IP 层的 IP 地址查找目的端。

客户端的网络层不用关心应用层或者传输层的东西，主要做的是通过查找路由表确定如何到达服务器，期间可能经过多个路由器，这些都是由路由器来完成的工作，不作过多的描述，无非就是通过查找路由表决定通过哪个路径到达服务器。

客户端的链路层，可通过链路层发送到路由器，通过邻居协议查找给定 IP 地址的 MAC 地址，然后发送 ARP 请求查找目的地址，如果得到回应后就可以使用 ARP 的请求应答交换的 IP 数据包现在就可以传输了，然后发送 IP 数据包到达服务器的地址。

事件顺序
(1) 浏览器获取输入的域名 www.baidu.com
(2) 浏览器向 DNS 请求解析 www.baidu.com 的 IP 地址
(3) 域名系统 DNS 解析出百度服务器的 IP 地址
(4) 浏览器与该服务器建立 TCP 连接（默认端口号 80）
(5) 浏览器发出 HTTP 请求，请求百度首页
(6) 服务器通过 HTTP 响应将文件发送给浏览器
（7）TCP 连接释放
（8）浏览器将首页文件进行解析，并将 Web 页显示给用户。

涉及到的协议
（1）应用层：

HTTP（万维网访问协议）

DNS（域名解析服务）

DNS 解析域名为目的 IP，通过 IP 找到服务器路径，客户端向服务器发起 HTTP 会话，然后通过传输层 TCP 协议封装数据包，在 TCP 协议基础上进行传输。

（2）传输层：

TCP（为 HTTP 提供可靠的数据传输）

UDP（DNS 使用 UDP 传输）

HTTP 会话会被分成报文段，添加源、目的端口；TCP 协议进行主要工作。

（3）网络层：

IP（IP 数据包传输和路由选择）

为数据包选择路由，IP 协议进行主要工作。

（4）数据链路层：

ICMP（提供网络传输过程中的差错检测）（网络层协议）

ARP（将本机的默认网关 IP 地址映射成物理 MAC 地址）

相邻节点的可靠传输，ARP 协议将 IP 地址转成 MAC 地址。